#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "üîç Ejecutando validaciones pre-commit..."

# Ejecutar lint-staged para archivos modificados
npx lint-staged

# Verificar que no hay archivos sensibles
if git diff --cached --name-only | grep -E '\.(env|key|pem|p12|crt)$'; then
  echo "‚ùå Error: Archivos sensibles detectados en commit"
  echo "   Remueve archivos .env, keys, certificados, etc."
  exit 1
fi

echo "‚úÖ Pre-commit checks passed!"